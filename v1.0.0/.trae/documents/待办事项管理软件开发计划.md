# 待办事项管理软件开发计划

## 一、项目概述
开发一款功能完整的待办事项管理软件，参考微软便签的简洁设计风格，支持一次性待办事项和循环待办事项，具备开机自启动、窗口置顶、小窗模式等功能，确保低资源占用。

## 二、技术栈
- **框架**: Electron + React + TypeScript
- **UI库**: Tailwind CSS（快速构建现代化界面）
- **状态管理**: React Context API + useReducer
- **拖放**: @dnd-kit/core（轻量级拖放库）
- **数据存储**: electron-store（本地持久化）
- **构建工具**: Vite（快速开发和构建）
- **打包工具**: electron-builder

## 三、环境配置（优先级：最高）

### 3.1 前置要求
- Node.js >= 18.0.0
- npm >= 9.0.0
- Git

### 3.2 环境配置步骤
1. **验证环境**
   - 检查 Node.js 版本
   - 检查 npm 版本
   - 检查 Git 配置

2. **初始化项目**
   - 创建项目基础结构
   - 初始化 package.json
   - 配置 TypeScript
   - 配置 Vite

3. **安装依赖**
   - 安装 Electron 相关依赖
   - 安装 React 相关依赖
   - 安装 UI 和工具库
   - 配置开发脚本

4. **配置开发环境**
   - 配置 ESLint 和 Prettier
   - 配置 TypeScript 编译选项
   - 配置 Vite 开发服务器
   - 配置 Electron 主进程和渲染进程

5. **验证环境**
   - 运行开发服务器
   - 启动 Electron 应用
   - 验证热更新功能
   - 确认所有依赖正常工作

## 四、功能模块设计

### 4.1 待办事项管理
- **数据模型**
  - TodoItem 接口：id, title, description, type, status, createdAt, completedAt
  - RecurringTodo 扩展：cycleType, customCycle, nextDueDate
  
- **待办类型**
  - 一次性待办事项
  - 循环待办事项（一天、一周、一个月、自定义）

### 4.2 窗口管理
- 窗口置顶功能
- 窗口最小化
- 小窗模式切换
- 窗口大小和位置记忆

### 4.3 系统功能
- 开机自启动（Windows 注册表）
- 低资源占用优化
- 数据持久化

### 4.4 界面交互
- 横向拖放排序
- 任务状态切换
- 视觉状态区分

## 五、界面设计（参考微软便签）

### 5.1 主界面
- **布局**: 横向卡片式布局
- **卡片设计**: 
  - 圆角矩形卡片
  - 柔和的阴影效果
  - 简洁的标题和描述
  - 清晰的状态标识

### 5.2 状态视觉设计
- **未完成**: 
  - 浅色背景（如淡黄色、淡蓝色）
  - 空心复选框图标
  - 正常字体样式
  
- **已完成**:
  - 灰色背景
  - 实心复选框图标
  - 删除线文字
  - 降低透明度

### 5.3 小窗模式
- 紧凑的卡片列表
- 精简的按钮和控件
- 优化的间距和字体大小

### 5.4 添加待办事项
- 简洁的模态对话框
- 清晰的表单布局
- 循环配置选项

## 六、开发阶段

### 阶段一：环境配置（当前阶段）
- [ ] 验证和配置开发环境
- [ ] 初始化项目结构
- [ ] 安装和配置所有依赖
- [ ] 验证开发环境正常工作

### 阶段二：基础架构
- [ ] 创建 Electron 主进程结构
- [ ] 创建 React 应用基础结构
- [ ] 配置状态管理
- [ ] 配置数据存储
- [ ] 实现基础窗口管理

### 阶段三：核心功能 - 待办事项管理
- [ ] 实现待办事项数据模型
- [ ] 创建待办事项组件
- [ ] 实现添加待办事项功能
- [ ] 实现编辑和删除功能
- [ ] 实现状态切换功能

### 阶段四：循环待办事项
- [ ] 实现循环周期配置
- [ ] 实现循环任务生成逻辑
- [ ] 实现自定义周期设置
- [ ] 实现到期检测和提醒

### 阶段五：窗口和系统功能
- [ ] 实现窗口置顶
- [ ] 实现窗口最小化
- [ ] 实现小窗模式
- [ ] 实现开机自启动
- [ ] 实现窗口位置记忆

### 阶段六：界面和交互
- [ ] 实现微软便签风格的卡片布局
- [ ] 实现状态视觉区分
- [ ] 实现横向拖放排序
- [ ] 实现小窗模式界面
- [ ] 添加动画和过渡效果

### 阶段七：性能优化
- [ ] 优化 Electron 进程通信
- [ ] 实现虚拟滚动（如需要）
- [ ] 优化内存使用
- [ ] 优化 CPU 占用
- [ ] 实现性能监控

### 阶段八：测试和打包
- [ ] 功能测试
- [ ] 性能测试（CPU<5%，内存<50MB）
- [ ] 用户体验测试
- [ ] 配置打包脚本
- [ ] 生成安装程序

## 七、性能优化策略

### 7.1 资源占用控制
- 使用轻量级依赖库
- 避免不必要的重新渲染
- 使用 React.memo 和 useMemo
- 优化 Electron 主进程和渲染进程通信
- 懒加载非关键功能

### 7.2 渲染优化
- 虚拟滚动（待办事项超过50个时）
- 防抖和节流用户输入
- 使用 CSS transform 代替 position 变化
- 优化动画性能

### 7.3 内存管理
- 及时清理未使用的组件
- 避免内存泄漏
- 优化大对象存储
- 定期清理缓存

## 八、项目结构

```
HengSch/
├── src/
│   ├── main/                    # Electron 主进程
│   │   ├── index.ts            # 主进程入口
│   │   ├── window.ts           # 窗口管理
│   │   ├── auto-start.ts       # 开机自启动
│   │   ├── ipc.ts              # IPC 通信
│   │   └── store.ts            # 数据存储
│   ├── renderer/               # React 渲染进程
│   │   ├── main.tsx            # 渲染进程入口
│   │   ├── App.tsx             # 根组件
│   │   ├── components/
│   │   │   ├── TodoCard.tsx    # 待办事项卡片
│   │   │   ├── TodoList.tsx    # 待办事项列表
│   │   │   ├── AddTodoModal.tsx # 添加待办对话框
│   │   │   ├── WindowControls.tsx # 窗口控制按钮
│   │   │   └── StatusBar.tsx   # 状态栏
│   │   ├── hooks/
│   │   │   ├── useTodos.ts     # 待办事项管理
│   │   │   ├── useDragDrop.ts  # 拖放功能
│   │   │   └── useWindow.ts    # 窗口管理
│   │   ├── context/
│   │   │   ├── TodoContext.tsx # 待办事项上下文
│   │   │   └── WindowContext.tsx # 窗口上下文
│   │   ├── types/
│   │   │   └── index.ts        # TypeScript 类型定义
│   │   ├── utils/
│   │   │   ├── storage.ts      # 存储工具
│   │   │   ├── date.ts         # 日期工具
│   │   │   └── drag.ts         # 拖放工具
│   │   └── styles/
│   │       └── index.css       # 全局样式
│   └── shared/
│       └── constants.ts        # 共享常量
├── public/
│   └── assets/                 # 静态资源
├── package.json
├── tsconfig.json
├── tsconfig.node.json
├── vite.config.ts
├── electron-builder.json       # 打包配置
├── .eslintrc.cjs
├── .prettierrc
└── README.md
```

## 九、开发顺序说明

**严格按照以下顺序执行**：
1. **阶段一：环境配置** - 必须完成并验证通过
2. **阶段二：基础架构** - 搭建项目骨架
3. **阶段三：核心功能** - 实现基本待办事项管理
4. **阶段四：循环待办** - 添加循环功能
5. **阶段五：窗口功能** - 实现系统级功能
6. **阶段六：界面交互** - 完善用户体验
7. **阶段七：性能优化** - 确保性能指标
8. **阶段八：测试打包** - 最终测试和打包

每个阶段完成后需进行验证，确保功能正常后再进入下一阶段。